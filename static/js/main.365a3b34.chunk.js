(this.webpackJsonpsupermusic=this.webpackJsonpsupermusic||[]).push([[0],{50:function(t,e,a){},52:function(t,e,a){},53:function(t,e,a){},59:function(t,e,a){},60:function(t,e,a){},61:function(t,e,a){},62:function(t,e,a){},63:function(t,e,a){},64:function(t,e,a){},65:function(t,e,a){},66:function(t,e,a){},67:function(t,e,a){},69:function(t,e,a){},70:function(t,e,a){},72:function(t,e,a){"use strict";a.r(e);var c=a(2),r=a(0),n=a.n(r),s=a(14),i=a.n(s),o=a(7),l=(a(50),a(36)),u=a(6),j=a(85),d=a(18),b=a.n(d),h=a(23),m="GET_TOP_TRACKS_FAILED",f="GET_ARTIST_INFO_FAILED",O="GET_SEARCH_TRACKS_FAILED",x="SEARCH_TRACKS_STATUS",v="GET_TOP_TRACKS",p="GET_ARTIST_INFO",k="GET_SEARCH_TRACKS",_="deb9c3028b400bea811320f3d9e46149",g=1,N=function(t){return{type:f,message:t}},T=function(t){return{type:m,message:t}},w=function(t){return{type:O,message:t}},E=function(t){return{type:x,status:t}},y=function(t){return{type:p,artist:t}},S=function(t){return{type:k,tracks:t}},F=function(){return function(){var t=Object(h.a)(b.a.mark((function t(e){var a,c;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("http://ws.audioscrobbler.com/2.0/?method=chart.gettoptracks&api_key=".concat(_,"&page=").concat(g,"&format=json"));case 3:if(!(a=t.sent).ok){t.next=19;break}return t.prev=5,t.next=8,a.json();case 8:c=t.sent,e((r=c.tracks.track,{type:v,tracks:r})),e(T("")),g++,t.next=17;break;case 14:throw t.prev=14,t.t0=t.catch(5),new Error("Incorrect data or server not responding, details: ".concat(t.t0.message));case 17:t.next=20;break;case 19:throw new Error("Error ".concat(a.status,": ").concat(a.statusText));case 20:t.next=26;break;case 22:t.prev=22,t.t1=t.catch(0),e(T('Failed to load tracks - "'.concat(t.t1.message,'"'))),setTimeout((function(){e(T(""))}),5500);case 26:case"end":return t.stop()}var r}),t,null,[[0,22],[5,14]])})));return function(e){return t.apply(this,arguments)}}()},I=(a(52),a(33)),C=a.n(I),A=(a(53),function(){var t=Object(u.f)();return Object(c.jsx)(j.a,{fluid:!0,className:"navigation p-0",children:Object(c.jsxs)("nav",{className:"navigation__body",children:[Object(c.jsx)("div",{className:"navigation__logo",onClick:function(){t.push("/")},children:"SUPER MUSIC"}),Object(c.jsx)("div",{className:"navigation__search",onClick:function(){t.push("/search")},children:Object(c.jsx)(C.a,{fontSize:"large"})})]})})}),R=(a(59),a(60),a(61),function(t){var e=t.image,a=t.name,r=t.artist,n=t.mbid,s=t.authorUrl;return Object(c.jsxs)("div",{className:"track",children:[Object(c.jsx)("div",{className:"track__image",children:Object(c.jsx)("img",{src:e,alt:"img"})}),Object(c.jsxs)("div",{className:"track__body",children:[Object(c.jsxs)("div",{className:"track__header",children:[Object(c.jsx)("div",{className:"track__name",children:a}),Object(c.jsx)("div",{className:"track__artist","data-artist":r,"data-mbid":n,children:r})]}),Object(c.jsx)("a",{className:"track__author-url",href:s,rel:"noreferrer",target:"_blank",title:r,children:"Profile on Last.fm"})]})]})}),L=(a(62),function(){var t=Object(o.b)();return Object(c.jsx)("div",{className:"more-tracks",children:Object(c.jsx)("div",{className:"more-tracks__button",onClick:function(){t(F())},children:"More tracks"})})}),G=a(86),P=(a(63),function(){return Object(c.jsxs)("div",{className:"loading",children:[Object(c.jsxs)("div",{className:"loading__title",children:["Please wait while the content is loaded",Object(c.jsx)("div",{className:"loading__subtitle",children:"Loading..."})]}),Object(c.jsx)("div",{className:"loading__img",children:Object(c.jsx)(G.a,{animation:"border",role:"status",variant:"light",children:Object(c.jsx)("span",{className:"sr-only",children:"Loading..."})})})]})}),D=function(t){var e=t.className,a=Object(u.f)(),r=Object(o.b)(),n=Object(o.c)((function(t){return t.tracks.topTracks})),s=0;return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("div",{className:e?"tracks ".concat(e):"tracks",onClick:function(t){var e=t.target,c=e.dataset.mbid,n=e.dataset.artist;(""===c||c)&&n&&(r(function(t,e){return function(){var a=Object(h.a)(b.a.mark((function a(c){var r,n;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,fetch("http://ws.audioscrobbler.com/2.0/?method=artist.getinfo&mbid=".concat(t,"&artist=").concat(e,"&api_key=").concat(_,"&format=json"));case 3:if(!(r=a.sent).ok){a.next=22;break}return a.prev=5,a.next=8,r.json();case 8:if(!(n=a.sent).artist.name){a.next=14;break}c(y(n)),c(N("")),a.next=15;break;case 14:throw new Error("value not found");case 15:a.next=20;break;case 17:throw a.prev=17,a.t0=a.catch(5),new Error("Incorrect data or server not responding, details: ".concat(a.t0.message));case 20:a.next=23;break;case 22:throw new Error("Error ".concat(r.status,": ").concat(r.statusText));case 23:a.next=29;break;case 25:a.prev=25,a.t1=a.catch(0),c(N('Failed to load info - "'.concat(a.t1.message,'"'))),setTimeout((function(){c(N(""))}),5500);case 29:case"end":return a.stop()}}),a,null,[[0,25],[5,17]])})));return function(t){return a.apply(this,arguments)}}()}(c,n)),a.push("/artist/".concat(n.split(" ").join("+"))))},children:n.length?n.map((function(t){return Object(c.jsx)("div",{className:"tracks__body",children:Object(c.jsx)(R,{name:t.name,artist:t.artist.name,mbid:t.artist.mbid,image:t.image[2]["#text"],authorUrl:t.artist.url})},s++)})):Object(c.jsx)("div",{className:"tracks__loading",children:Object(c.jsx)(P,{})})}),Object(c.jsx)("div",{className:"tracks-more",children:Object(c.jsx)(L,{})})]})},K=a(88),M=(a(64),function(t){var e=t.variant,a=t.text;return Object(c.jsx)("div",{className:"message",children:Object(c.jsx)(K.a,{variant:e,children:a})})}),U=function(){var t=Object(o.c)((function(t){return t.actions.topTracksFailed}));return Object(c.jsxs)("main",{className:"index",children:[t&&Object(c.jsx)(M,{variant:"danger",text:t}),Object(c.jsx)(D,{className:"tracks_padding-top-50"})]})},H=(a(65),a(39)),B=a(89),J=a(87),z=(a(66),a(67),function(t){var e=t.name,a=t.artist;return Object(c.jsx)("div",{className:"search-tracks-item",children:Object(c.jsxs)("div",{className:"search-tracks-item__body",children:[Object(c.jsx)("div",{className:"search-tracks-item__name",children:e}),Object(c.jsx)("div",{className:"search-tracks-item__artist",children:a})]})})}),V=function(t){var e=t.className,a=Object(r.useState)(""),n=Object(H.a)(a,2),s=n[0],i=n[1],l=Object(o.c)((function(t){return t.tracks.search})),u=Object(o.c)((function(t){return t.tracks.searchStatus})),j=Object(o.b)(),d=1;return Object(c.jsxs)("div",{className:e?"search-tracks ".concat(e):"search-tracks",children:[Object(c.jsxs)("div",{className:"search-tracks__header",children:[Object(c.jsx)("div",{className:"search-tracks__field",children:Object(c.jsx)(B.a,{onSubmit:function(t){t.preventDefault()},children:Object(c.jsxs)(B.a.Group,{controlId:"formSearch",children:[Object(c.jsx)(B.a.Label,{children:"Search tracks"}),Object(c.jsx)(B.a.Control,{onChange:function(t){i(t.target.value)},value:s,type:"text",placeholder:"Name of the track"}),Object(c.jsx)(B.a.Text,{className:"search-tracks__status",children:u})]})})}),Object(c.jsx)("div",{className:"search-tracks__button-box",children:Object(c.jsx)(J.a,{onClick:function(){if(s.trim().length<3||""===s.trim())return j(E("Validation error")),void i("");var t;j((t=s,function(){var e=Object(h.a)(b.a.mark((function e(a){var c,r,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("http://ws.audioscrobbler.com/2.0/?method=track.search&track=".concat(t,"&limit=10&api_key=").concat(_,"&format=json"));case 3:if(!(c=e.sent).ok){e.next=27;break}return e.prev=5,e.next=8,c.json();case 8:if(r=e.sent,0!==Number(r.results["opensearch:totalResults"])){e.next=13;break}return a(S([])),a(E("Tracks not found")),e.abrupt("return");case 13:if(!(n=r.results.trackmatches.track)[0].name){e.next=19;break}a(S(n)),a(E("Enter track title")),e.next=20;break;case 19:throw new Error("value not found");case 20:e.next=25;break;case 22:throw e.prev=22,e.t0=e.catch(5),new Error("Incorrect data or server not responding, details: ".concat(e.t0.message));case 25:e.next=28;break;case 27:throw new Error("Error ".concat(c.status,": ").concat(c.statusText));case 28:e.next=35;break;case 30:e.prev=30,e.t1=e.catch(0),a(w('Search error - "'.concat(e.t1.message,'"'))),a(E("Error")),setTimeout((function(){a(w(""))}),5500);case 35:case"end":return e.stop()}}),e,null,[[0,30],[5,22]])})));return function(t){return e.apply(this,arguments)}}()))},variant:"light",className:"search-tracks__button",children:"Search"})})]}),Object(c.jsx)("div",{className:"search-tracks__body",children:!!l.length&&l.map((function(t){return Object(c.jsx)(z,{name:t.name,artist:t.artist},d++)}))})]})},W=function(){var t=Object(o.b)(),e=Object(o.c)((function(t){return t.actions.searchTracksFailed}));return Object(r.useEffect)((function(){return function(){t(S([])),t(E("Enter track title"))}}),[t]),Object(c.jsxs)("main",{className:"search",children:[e&&Object(c.jsx)(M,{variant:"danger",text:e}),Object(c.jsx)(V,{className:"search-tracks_padding-top-50"})]})},q=(a(69),a(70),function(t){var e=t.className,a=Object(o.c)((function(t){return t.artist.artistInfo})),r=0;return Object(c.jsx)("div",{className:e?"artist-info ".concat(e):"artist-info",children:a?Object(c.jsxs)("div",{className:"artist-info__body",children:[Object(c.jsxs)("div",{className:"artist-info__preview",children:[Object(c.jsx)("div",{className:"artist-info__img",children:Object(c.jsx)("img",{src:a.artist.image[2]["#text"],alt:"img"})}),Object(c.jsxs)("div",{className:"artist-info__header",children:[Object(c.jsx)("div",{className:"artist-info__name",children:a.artist.name}),Object(c.jsx)("div",{className:"artist-info__tags",children:a.artist.tags.tag.map((function(t){return Object(c.jsx)("div",{className:"artist-info__tag",children:t.name},r++)}))})]})]}),Object(c.jsx)("div",{className:"artist-info__description",dangerouslySetInnerHTML:{__html:a.artist.bio.content}})]}):Object(c.jsx)("div",{className:"artist-info__loading",children:Object(c.jsx)(P,{})})})}),Q=function(){var t=Object(o.b)(),e=Object(o.c)((function(t){return t.actions.artistInfoFailed}));return Object(r.useEffect)((function(){return function(){t(y(void 0))}}),[t]),Object(c.jsxs)("main",{className:"artist",children:[e&&Object(c.jsx)(M,{variant:"warning",text:e}),Object(c.jsx)(q,{className:"artist-info_padding-top-50"})]})},X=function(){var t=Object(o.b)();return Object(r.useEffect)((function(){t(F())}),[t]),Object(c.jsxs)(l.a,{basename:"/supermusic",children:[Object(c.jsx)(A,{}),Object(c.jsx)(j.a,{className:"main",children:Object(c.jsxs)(u.c,{children:[Object(c.jsx)(u.a,{component:U,path:"/",exact:!0}),Object(c.jsx)(u.a,{component:W,path:"/search"}),Object(c.jsx)(u.a,{component:Q,path:"/artist/:artist"})]})})]})},Y=a(16),Z=a(37),$=a(38),tt=a(10),et={topTracks:[],search:[],searchStatus:"Enter track title"},at=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case v:return Object(tt.a)(Object(tt.a)({},t),{},{topTracks:t.topTracks.concat(e.tracks)});case k:return Object(tt.a)(Object(tt.a)({},t),{},{search:e.tracks});case x:return Object(tt.a)(Object(tt.a)({},t),{},{searchStatus:e.status});default:return t}},ct={topTracksFailed:"",artistInfoFailed:"",searchTracksFailed:""},rt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ct,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case m:return Object(tt.a)(Object(tt.a)({},t),{},{topTracksFailed:e.message});case f:return Object(tt.a)(Object(tt.a)({},t),{},{artistInfoFailed:e.message});case O:return Object(tt.a)(Object(tt.a)({},t),{},{searchTracksFailed:e.message});default:return t}},nt={artistInfo:void 0},st=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case p:return Object(tt.a)(Object(tt.a)({},t),{},{artistInfo:e.artist});default:return t}},it=Object(Y.combineReducers)({tracks:at,actions:rt,artist:st}),ot=[Z.a],lt=Object(Y.createStore)(it,{},Object($.composeWithDevTools)(Y.applyMiddleware.apply(void 0,ot))),ut=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,90)).then((function(e){var a=e.getCLS,c=e.getFID,r=e.getFCP,n=e.getLCP,s=e.getTTFB;a(t),c(t),r(t),n(t),s(t)}))},jt=Object(c.jsx)(o.a,{store:lt,children:Object(c.jsx)(n.a.StrictMode,{children:Object(c.jsx)(X,{})})});i.a.render(jt,document.getElementById("super-music")),ut()}},[[72,1,2]]]);
//# sourceMappingURL=main.365a3b34.chunk.js.map